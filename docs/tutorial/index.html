
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pages.github.ibm.com/ml4code/pdl/tutorial/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../api_reference/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Tutorial - Prompt Description Language</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pdl-language-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Prompt Description Language" class="md-header__button md-logo" aria-label="Prompt Description Language" data-md-component="logo">
      
  <img src="../assets/ai-governance--prompt.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prompt Description Language
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../api_reference/" class="md-tabs__link">
        
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../contrib/" class="md-tabs__link">
        
  
    
  
  Contribute

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../viewer/" class="md-tabs__link">
        
  
    
  
  Viewer

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Prompt Description Language" class="md-nav__button md-logo" aria-label="Prompt Description Language" data-md-component="logo">
      
  <img src="../assets/ai-governance--prompt.svg" alt="logo">

    </a>
    Prompt Description Language
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-document" class="md-nav__link">
    <span class="md-ellipsis">
      Simple document
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-an-llm" class="md-nav__link">
    <span class="md-ellipsis">
      Calling an LLM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-definition-and-use" class="md-nav__link">
    <span class="md-ellipsis">
      Variable Definition and Use
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-chaining" class="md-nav__link">
    <span class="md-ellipsis">
      Model Chaining
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Function Definition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouping-variable-definitions-in-defs" class="md-nav__link">
    <span class="md-ellipsis">
      Grouping Variable Definitions in Defs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#muting-block-output-with-show_result" class="md-nav__link">
    <span class="md-ellipsis">
      Muting Block Output with Show_result
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-from-file-or-stdin" class="md-nav__link">
    <span class="md-ellipsis">
      Input from File or Stdin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-code" class="md-nav__link">
    <span class="md-ellipsis">
      Calling code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Calling APIs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-block" class="md-nav__link">
    <span class="md-ellipsis">
      Data Block
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include-block" class="md-nav__link">
    <span class="md-ellipsis">
      Include Block
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditionals-and-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Conditionals and Loops
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-loops" class="md-nav__link">
    <span class="md-ellipsis">
      For Loops
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-pdl-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging PDL Programs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-pdl-programmatically-from-python" class="md-nav__link">
    <span class="md-ellipsis">
      Calling PDL Programmatically from Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization-with-the-live-document" class="md-nav__link">
    <span class="md-ellipsis">
      Visualization with the Live Document
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pdl-code-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      PDL Code Assistant
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contrib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viewer
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="pdl-language-tutorial">PDL Language Tutorial</h1>
<p>The following sections give a step-by-step overview of PDL language features.
All the examples in this tutorial can be found in <code>examples/</code>.</p>
<h2 id="simple-document">Simple document</h2>
<p>The simplest PDL program is one that generates a small document (<a href="../examples/tutorial/simple_program.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world!</span>
<span class="nt">document</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Hello, world!</span>
</code></pre></div>
<p>This program has a <code>description</code> field, which contains a title. It also has a <code>document</code> field, which can be either a string, a <em>block</em>, or a list of strings and blocks. A block is a recipe for how to obtain data (e.g., model call, code call, etc...). In this case, there are no calls to an LLM or other tools, and <code>document</code> consists of a simple string.</p>
<p>To render the program into an actual document, we have a PDL interpreter that can be invoked as follows:</p>
<div class="highlight"><pre><span></span><code>python3 -m pdl.pdl ./examples/hello/hello.yaml
</code></pre></div>
<p>This results in the following output:</p>
<div class="highlight"><pre><span></span><code>Hello, world!
</code></pre></div>
<h2 id="calling-an-llm">Calling an LLM</h2>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world calling a model</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>In this program (<a href="../examples/tutorial/calling_llm.yaml">file</a>), the <code>document</code> starts with the word <code>Hello,</code>, and we call a model (<code>ibm/granite-20b-code-instruct-v2</code>) with this as input prompt. 
The model is passed some parameters including the <code>decoding_method</code> and <code>stop_sequences</code>, which are to be included in the output. Since the <code>input</code> field is not specified in the model call, the entire document up that point is passed to the model as input context. </p>
<p>In general, a model call accepts the same parameters as BAM's <a href="https://bam.res.ibm.com/docs/api-reference#text-generation">text generation</a> interface, with the exception that we provide some default values when the following parameters are missing:
  - <code>decoding_method</code>: <code>greedy</code>
  - <code>max_new_tokens</code>: 1024
  - <code>min_new_tokens</code>: 1
  - <code>repetition_penalty</code>: 1.07</p>
<p>Also if the <code>decoding_method</code> is <code>sample</code>, then the following defaults are used:
  - <code>temperature</code>: 0.7
  - <code>top_p</code>: 0.85
  - <code>top_k</code>: 50</p>
<p>The user can override these defaults by explicitly including them in the model call.</p>
<p>When we execute this program using the interpreter, we obtain:</p>
<div class="highlight"><pre><span></span><code>Hello, world!
</code></pre></div>
<p>where the portion <code>world!</code> has been generated by Granite.</p>
<p>Here's another of model call that includes an <code>input</code> field:
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world calling a model</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Hello,</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-multilingual</span>
<span class="w">  </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Translate &#39;the world&#39; to French</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
</code></pre></div></p>
<p>In this case, we make a call to a falcon model, and the input passed to the model is the sentence: <code>Translate 'the world' to French</code> and nothing else from the surrounding document. When we execute this program, we obtain:</p>
<div class="highlight"><pre><span></span><code>Hello, Le monde
</code></pre></div>
<h2 id="variable-definition-and-use">Variable Definition and Use</h2>
<p>Any block can have a variable definition using a <code>def: &lt;var&gt;</code> field. This means that the output of that block is assigned to the variable <code>&lt;var&gt;</code>, which may be reused at a later point in the document. </p>
<p>Consider the following example (<a href="../examples/tutorial/variable_def_use.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world with variable def and use</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GEN</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nGEN</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">equal</span><span class="nv"> </span><span class="s">to:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">GEN</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>Here we assign the output of the model to variable <code>GEN</code> using the <code>def</code> field. The last line of the program prints out the value of <code>GEN</code>. Notice the notation <code>{{ }}</code> for accessing the value of a variable.</p>
<p>When we execute this program, we obtain:
<div class="highlight"><pre><span></span><code>Hello, world!
GEN is equal to:  world!
</code></pre></div></p>
<h2 id="model-chaining">Model Chaining</h2>
<p>In PDL, we can declaratively chain models together as in the following example (<a href="../examples/tutorial/model_chaining.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world with model chainings</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nTranslate</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">French\n&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-multilingual</span>
</code></pre></div>
<p>In this program, the first call is to a granite model to complete the sentence <code>Hello, world!</code>. The following block in the document prints out the sentence: <code>Translate the above sentence to French</code>. The final line of the program takes the entire document produced so far and passes it as input to a falcon model. Notice that the input passed to the falcon model is the document up to that point. This makes it easy to chain models together and continue building on previous interactions.</p>
<p>When we execute this program, we obtain:</p>
<div class="highlight"><pre><span></span><code>Hello, world!
Translate the above sentence to French
Bonjour, monde!
</code></pre></div>
<h2 id="function-definition">Function Definition</h2>
<p>PDL also supports function definitions to make it easier to reuse code.
Suppose we want to define a translation function that takes a string and calls a falcon model for the translation. This would be written in PDL as follows (<a href="../examples/tutorial/function_definition.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world with functions</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GEN</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">function</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">  </span><span class="nt">return</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nTranslate</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">language</span><span class="nv"> </span><span class="s">}}\n&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-multilingual</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">French</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bye,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Spanish</span>
</code></pre></div>
<p>In this program, the third block defines a function <code>translate</code> that takes as parameters <code>sentence</code> and <code>language</code>, both of which are of type string. The body of the function is defined by its <code>return</code> field. In this case, we formulate a translation prompt using the parameters and send it to a falcon model.</p>
<p>The last two blocks are calls to this function, as indicated by <code>call: translate</code>. This block specifies the arguments to be passed. When we execute this program, we obtain:</p>
<div class="highlight"><pre><span></span><code>Hello, world!
Translate the sentence &#39;Hello, world!&#39; to French
Bonjour, monde!
Translate the sentence &#39;Bye, world!&#39; to Spanish
Adiós, mundo!
</code></pre></div>
<p>A function only contributes to the output document when it is called. So the definition itself results in <code>""</code>. When we call a function, we implicitly pass the current document context, and this is used as input to model calls inside the function body. In the above example, since the <code>input</code> field is omitted, the entire document produced at that point is passed as input to the falcon model. </p>
<h2 id="grouping-variable-definitions-in-defs">Grouping Variable Definitions in Defs</h2>
<p>In PDL, the above program can be written more neatly by grouping certain variable definitions into a <code>defs</code> section, as follows (<a href="../examples/tutorial/grouping_definitions.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world with functions</span>
<span class="nt">defs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">translate</span><span class="p">:</span>
<span class="w">    </span><span class="nt">function</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">      </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">return</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nTranslate</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">language</span><span class="nv"> </span><span class="s">}}\n&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-multilingual</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GEN</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">French</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bye,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Spanish</span>
</code></pre></div>
<p>This program has the same output has the one from the previous section.</p>
<p>Notice that moving the <code>GEN</code> variable in <code>defs</code> would change the semantics of the program. This is because that model call is dependent on its context. Since it does not have an <code>input</code> field, it depends on what was produced in the document up to that point. Moving it to <code>defs</code> means that it would be executed immediately with an empty context. </p>
<h2 id="muting-block-output-with-show_result">Muting Block Output with Show_result</h2>
<p>By default, when a PDL block is executed it produces a result that gets printed in the output document. It is possible to mute this feature by setting <code>show_result</code> to <code>false</code> for any block. This feature allows the computation of intermediate values that are not necessarily output in the document.</p>
<p>Consider the same example as above, but with <code>show_result</code> set to <code>false</code> (<a href="../examples/tutorial/muting_block_output.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world with functions</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GEN</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">function</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">  </span><span class="nt">return</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nTranslate</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">language</span><span class="nv"> </span><span class="s">}}\n&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-multilingual</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FRENCH</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">French</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">translate</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sentence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bye,{{ GEN }}</span>
<span class="w">    </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Spanish</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nThe</span><span class="nv"> </span><span class="s">french</span><span class="nv"> </span><span class="s">sentence</span><span class="nv"> </span><span class="s">was:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">FRENCH</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>The call to the translator with French as language does not produce an output. However, we save the result in variable <code>FRENCH</code> and use it in the last sentence of the document. When we execute this program, we obtain:</p>
<div class="highlight"><pre><span></span><code>Hello, world!
Translate the sentence &#39;Bye, world!&#39; to Spanish
Nos vemos, mundo!
The french sentence was: Bonjour, monde!
</code></pre></div>
<h2 id="input-from-file-or-stdin">Input from File or Stdin</h2>
<p>PDL can accept textual input from a file or stdin. In the following example (<a href="../examples/tutorial/input_file.yaml">file</a>), the contents of this <a href="../examples/input/data.txt">file</a> are read by PDL and incorporated in the document. The result is also assigned to a variable <code>HELLO</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PDL code with input block</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/input/data.txt</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HELLO</span>
</code></pre></div>
<p>In the next example, prompts are obtained from stdin (<a href="../examples/tutorial/input_stdin.yaml">file</a>). This is indicated by assigning the value <code>null</code> to the <code>read</code> field.</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PDL code with input block</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">prompt</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">stdin.\n&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span>
<span class="w">  </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Please</span><span class="nv"> </span><span class="s">provide</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">input:</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STDIN</span>
</code></pre></div>
<p>Notice that when executing programs containing input blocks, the stdin input is obtained first and then the entire document is printed when produced. The document is not printed as it gets produced since there may be portions that are intermediate results and must be hidden (see <code>show_result</code> feature above). If the <code>message</code> field is omitted then one is provided for you.</p>
<p>The following example shows a multiline stdin input (<a href="../examples/tutorial/input_stdin_multiline.yaml">file</a>). When executing this code and to exit from the multiline input simply press control D (macos).
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PDL code with input block</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;A</span><span class="nv"> </span><span class="s">multiline</span><span class="nv"> </span><span class="s">stdin</span><span class="nv"> </span><span class="s">input.\n&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span>
<span class="w">  </span><span class="nt">multiline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p>Finally, the following example shows reading content in JSON format. In this case the block's <code>assign</code> field must be defined since the block adds the JSON content in that format to the scope, assigning this content to the named variable.</p>
<p>Consider the JSON content in this <a href="../tests/data/input.json">file</a>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;street&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Smith Road&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;town&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Armonk&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NY&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;zip&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10504</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>The following PDL program reads this content and assigns it to variable <code>PERSON</code> in JSON format (<a href="../examples/tutorial/input_file_json.yaml">file</a>). The reference <code>PERSON.address.street</code> then refers to that field inside the JSON object.</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Input block example with json input</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tests/data/input.json</span>
<span class="w">  </span><span class="nt">parser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PERSON</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">PERSON.name</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">lives</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">following</span><span class="nv"> </span><span class="s">address:\n&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">PERSON.address.number</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">PERSON.address.street</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">town</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">PERSON.address.town</span><span class="nv"> </span><span class="s">}},</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">PERSON.address.state</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>When we execute this program, we obtain:
<div class="highlight"><pre><span></span><code>Bob lives at the following address:
87 Smith Road in the town of Armonk, NY
</code></pre></div></p>
<h2 id="calling-code">Calling code</h2>
<p>The following script shows how to execute python code (<a href="../examples/tutorial/calling_code.yaml">file</a>). Currently, the python code is executed locally. In the future, we plan to use a serverless cloud engine to execute snippets of code. So in principle, PDL is agnostic of any specific programming language. The result of the code must be assigned to the variable <code>result</code> internally to be propagated to the result of the block.</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello world showing call to python code</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Hello,</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lan</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="nt">code</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">import random</span>
<span class="w">    </span><span class="no">import string</span>
<span class="w">    </span><span class="no">result = random.choice(string.ascii_lowercase)</span>
</code></pre></div>
<p>This results in the following output:
<div class="highlight"><pre><span></span><code>Hello, r!
</code></pre></div></p>
<h2 id="calling-apis">Calling APIs</h2>
<p>PDL programs can contain calls to REST APIs. Consider a simple weather app (<a href="../examples/tutorial/calling_apis.yaml">file</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Using a weather API and LLM to make a small weather app</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QUERY</span>
<span class="w">  </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ask</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">query:</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">input</span><span class="p">:</span>
<span class="w">    </span><span class="nt">document</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">      </span><span class="no">Question: What is the weather in London?</span>
<span class="w">      </span><span class="no">London</span>
<span class="w">      </span><span class="no">Question: What&#39;s the weather in Paris?</span>
<span class="w">      </span><span class="no">Paris</span>
<span class="w">      </span><span class="no">Question: Tell me the weather in Lagos?</span>
<span class="w">      </span><span class="no">Lagos</span>
<span class="w">      </span><span class="no">Question: {{ QUERY }}</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Question</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LOCATION</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">api</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">  </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://api.weatherapi.com/v1/current.json?key=cf601276764642cb96224947230712&amp;q=</span>
<span class="w">  </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">LOCATION</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WEATHER</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">Explain what the weather is from the following JSON:</span>
<span class="w">    </span><span class="no">`{{ WEATHER }}`</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
<span class="w">    </span><span class="nt">max_new_tokens</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;!&#39;</span>
<span class="w">    </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<p>In this program, we first prompt the user to enter a query about the weather in some location (assigned to variable <code>QUERY</code>). The next block is a call to a granite model with few-shot examples to extract the location, which we assign to variable <code>LOCATION</code>. The next block makes an API block. Currently we only support simple <code>GET</code> calls as shown above, but will improve this interface in the future. Here the <code>LOCATION</code> is appended to the <code>url</code>. The result is a JSON object, which may be hard to interpret for a human user. So we make a final call to an LLM to interpret the JSON in terms of weather. Notice how many blocks have <code>show_result</code> set to <code>false</code> to hide intermediate results.</p>
<p>Here is an example of interaction with this program:
<div class="highlight"><pre><span></span><code>Ask a query: What is the weather in Anchorage?

Answer: The weather in Anchorage, Alaska, United States of America is currently overcast with a temperature of -2.8°C (-5.0°F). The wind speed is 4.3 mph (6.8 kph) and the humidity is 66%.
</code></pre></div></p>
<h2 id="data-block">Data Block</h2>
<p>PDL offers the ability to create JSON data as illustrated by the following example (described in detail in the <a href="../README.md#overview">Overview</a> section). The <code>data</code> block can gather previously defined variables into a JSON structure. This feature is useful for data generation. Programs such as this one can be bootstrapped with a bash or Python script to generate data en masse. (<a href="../examples/tutorial/data_block.yaml">file</a>)</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code explanation example</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/code/data.json</span>
<span class="w">  </span><span class="nt">parser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CODE</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/code/ground_truth.txt</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TRUTH</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">  </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXPLANATION</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">decoding_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">greedy</span>
<span class="w">    </span><span class="nt">max_new_tokens</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span>
<span class="w">  </span><span class="nt">input</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Here is some info about the location of the function in the repo.</span>
<span class="w">      </span><span class="no">repo: </span>
<span class="w">      </span><span class="no">{{ CODE.repo_info.repo }}</span>
<span class="w">      </span><span class="no">path: {{ CODE.repo_info.path }}</span>
<span class="w">      </span><span class="no">Function_name: {{ CODE.repo_info.function_name }}</span>


<span class="w">      </span><span class="no">Explain the following code:</span>
<span class="w">      </span><span class="no">```</span>
<span class="w">      </span><span class="no">{{ CODE.source_code }}```</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EVAL</span>
<span class="w">  </span><span class="nt">show_result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">  </span><span class="nt">lan</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="nt">code</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">import textdistance</span>
<span class="w">    </span><span class="no">expl = &quot;&quot;&quot;</span>
<span class="w">    </span><span class="no">{{ EXPLANATION }}</span>
<span class="w">    </span><span class="no">&quot;&quot;&quot;</span>
<span class="w">    </span><span class="no">truth = &quot;&quot;&quot;</span>
<span class="w">    </span><span class="no">{{ TRUTH }}</span>
<span class="w">    </span><span class="no">&quot;&quot;&quot;</span>
<span class="w">    </span><span class="no">result = textdistance.levenshtein.normalized_similarity(expl, truth)</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="w">    </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">CODE</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">EXPLANATION</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">metric</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">EVAL</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<h2 id="include-block">Include Block</h2>
<p>PDL allows programs to be defined over multiple files. The <code>include</code> block allows one file to incorporate another, as shown in the
following <a href="../examples/consultant/biz_rules_extraction.yaml">example</a>:</p>
<div class="highlight"><pre><span></span><code>description: Business Rules extraction from Jsp pages
defs:
  PROMPTS2: 
    | 
    Convert above provided JSP code into business rules. Response should be in plain English and should not include any code. Do not output anything other than response. Please extract and summarize all the business rules in the below 5 categories:
      -Data Retrieval
      -User Interface
      -Results Display
      -JavaScript
  PROMPTS2_NOTES:
  - |

    * Strictly include all relevant parameters related to each of the above categories

document:
  - include: examples/consultant/function.yaml
  - call: template
    args:
      preamble: &quot;jsp: {{ input_data }}&quot;
      question: &quot;{{ PROMPTS2 }}&quot;
      notes: &quot;{{ PROMPTS2_NOTES }}&quot;
</code></pre></div>
<p>which includes the following <a href="../examples/consultant/function.yaml">file</a>:</p>
<div class="highlight"><pre><span></span><code>description: Function definition
defs:
  template:
    function:
      preamble: str
      question: str
      notes: str
    return:
    - |
      {{ preamble }}
      ### Question: {{ question }}

      ### Notes:
      {{ notes }}

      ### Answer: 
document: &quot;&quot;
</code></pre></div>
<p>The <code>include</code> block means that the PDL code at that file is executed and its output is included at the point where the <code>include</code> block appears in a document. In this example, the file contains a function definition, which is used in the first program as a template. This feature allows reuse of common templates and patterns and to build libraries.</p>
<h2 id="conditionals-and-loops">Conditionals and Loops</h2>
<p>PDL supports conditionals and loops as illustrated in the followin example (<a href="../examples/tutorial/conditionals_loops.yaml">file</a>).</p>
<p>The task at hand is to generate math problems that look like the <a href="../examples/arith/example1.txt">following</a>:</p>
<div class="highlight"><pre><span></span><code>Question: Noah charges $60 for a large painting and $30 for a small painting.
Last month he sold eight large paintings and four small paintings.
If he sold twice as much this month, how much is his sales for this month?

Answer: Let&#39;s think step by step.
He sold 8 large paintings and 4 small paintings last month.
He sold twice as many this month.
8 large paintings x $60 = &lt;&lt; 8*60= 480 &gt;&gt; 480
4 small paintings x $30 = &lt;&lt; 4*30= 120 &gt;&gt; 120
So he sold &lt;&lt; 480+120= 600 &gt;&gt; 600 paintings last month.
Therefore he sold &lt;&lt; 600*2= 1200 &gt;&gt; this month.
The answer is $1200.
</code></pre></div>
<p>We want the LLM to generate a math problem after <code>Question</code>, then generate an <code>Answer</code> with step-by-step reasoning. In the answer there may be arithmetic expressions. As we know that LLMs sometimes make mistakes with arithmentic, we wish to use Python to computer all arithmetic expressions in the answer. In the example above, generation should stop at <code>&lt;&lt;</code> symbols, then generate an arithmetic expression, followed by an <code>=</code> sign. At that point, we want to switch to Python and compute the expression as code, print the result and continue generation. This process should repeat until the model generates the phrase <code>The answer is</code>.</p>
<p>The following PDL program captures this task:</p>
<div class="highlight"><pre><span></span><code><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Arithmetic Expressions</span>
<span class="nt">document</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/arith/example1.txt</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">read</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/arith/example2.txt</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repeat</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\nQuestion:</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QUESTION</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Answer</span>
<span class="w">      </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Answer:</span><span class="nv"> </span><span class="s">Let&#39;s</span><span class="nv"> </span><span class="s">think</span><span class="nv"> </span><span class="s">step</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">step.\n&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repeat</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REASON_OR_CALC</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&lt;&lt;&#39;</span>
<span class="w">        </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">REASON_OR_CALC.endswith(&quot;&lt;&lt;&quot;)</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">      </span><span class="nt">then</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXPR</span>
<span class="w">        </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibm/granite-20b-code-instruct-v2</span>
<span class="w">        </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">          </span><span class="nt">stop_sequences</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;=&#39;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\n&quot;</span>
<span class="w">          </span><span class="nt">include_stop_sequence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;=</span><span class="nv"> </span><span class="s">&#39;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">def</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RESULT</span>
<span class="w">        </span><span class="nt">lan</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">        </span><span class="nt">code</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result = {{ EXPR }}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;</span><span class="nv"> </span><span class="s">&gt;&gt;&#39;</span>
<span class="w">    </span><span class="nt">until</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">&quot;The</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">is&quot;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">REASON_OR_CALC</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;\n\n&quot;</span>
<span class="w">  </span><span class="nt">num_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</code></pre></div>
<p>The first two blocks read math problem examples and include them in the document. These will be our few-shot examples. The next block is a repetion as indicated by the fields: <code>repeat</code> and the accompanying <code>num_iterations</code>. The field <code>repeat</code> can contain any document (string or block or list of strings and blocks), the <code>num_iterations</code> indicates how many times to repeat.</p>
<p>In the body of the <code>repeat</code> block, the program first asks granite to generate a question and add it to the document. Next we print <code>Answer: Let's think step by step.\n</code>. The following block is a repeat-until: the document in <code>repeat</code> is repeated until the condition in the <code>until</code> field becomes true. Here the condition states that we stop the iteration when variable <code>REASON_OR_CALC</code> contains <code>&lt;&lt;</code>. That variable is defined in the first block of the repeat-until -- we prompt a granite model and stop at the character <code>&lt;&lt;</code>.</p>
<p>The next block is an if-then-else. We check if <code>REASON_OR_CALC</code> ends with <code>&lt;&lt;</code> and if so we prepare for the python call to perform the arithmetic calculation. First, we have the granite model generate an <code>EXPR</code> variable, which we then use inside the <code>code</code> of the following Python block. </p>
<p>When we execute this program, we obtain 3 math problems like the ones in the <a href="../examples/arith/">examples</a>. Try it! </p>
<h2 id="for-loops">For Loops</h2>
<p>PDL also offers <code>for</code> loops over lists.
The following <a href="../examples/hello/hello17.yaml">example</a> simply prints each value in the list followed by a newline:</p>
<div class="highlight"><pre><span></span><code>description: for loop
document:
- for:
    i: [1, 2, 3, 4]
  repeat: 
    &quot;{{ i }}\n&quot;
</code></pre></div>
<p>The <code>for</code> loop constructs also allows iterating over 2 or more lists of the same length simultaneously:</p>
<div class="highlight"><pre><span></span><code>description: for loop
defs:
  numbers: {
    data: [1, 2, 3, 4]
  }
  names: {
    data: [&quot;Bob&quot;, &quot;Carol&quot;, &quot;David&quot;, &quot;Ernest&quot;]
  }

document:
- for:
    number: &quot;{{ numbers }}&quot;
    name: &quot;{{ names }}&quot;
  repeat:
    &quot;{{ name }}&#39;s number is {{ number }}\n&quot;
</code></pre></div>
<p>This results in the following output:</p>
<div class="highlight"><pre><span></span><code>Bob&#39;s number is 1
Carol&#39;s number is 2
David&#39;s number is 3
Ernest&#39;s number is 4
</code></pre></div>
<h2 id="debugging-pdl-programs">Debugging PDL Programs</h2>
<p>We highly recommend to use VSCode to edit PDL YAML files. This project has been configured so that every YAML file is associated with the PDL grammar JSONSchema (see <a href=".vscode/settings.json">settings</a> and <a href="pdl-schema.json">schema</a>). This enables the editor to display error messages when the yaml deviates from the PDL syntax and grammar. It also provides code completion. You can set up your own VSCode PDL projects similarly using this settings and schema files. The PDL interpreter also provides similar error messages.</p>
<p>The interpreter prints out a log by default in the file <code>log.txt</code>. This log contains the details of inputs and outputs to every block in the program. It is useful to examine this file when the program is behaving differently than expected.</p>
<p>To change the log filename, you can pass it to the interpreter as follows:</p>
<div class="highlight"><pre><span></span><code>python3 -m pdl.pdl --log &lt;my-logfile&gt; &lt;my-example&gt;
</code></pre></div>
<h2 id="calling-pdl-programmatically-from-python">Calling PDL Programmatically from Python</h2>
<p>[[ TODO ]]</p>
<h2 id="visualization-with-the-live-document">Visualization with the Live Document</h2>
<p>[[ TODO ]]</p>
<h2 id="pdl-code-assistant">PDL Code Assistant</h2>
<p>[[ TODO ]]</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../api_reference/" class="md-footer__link md-footer__link--next" aria-label="Next: API Reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                API Reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.highlight", "search.suggest", "navigation.sections", "navigation.path", "navigation.footer", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate", "navigation.tabs"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>