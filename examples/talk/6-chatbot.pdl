description: chatbot
document:
- read:
  def: query
  message: "What is your query?\n"
- repeat:
    document:
    - model: ibm/granite-13b-chat-v2
      spec: str
      params:
        max_new_tokens: 200
    - read:
      def: eval
      message: "\nIs this a good answer[yes/no]?\n"
      show_result: false
    - if: "{{ eval == 'no' }}"
      then:
        - read:
          message: "Why not?\n"
  as: document
  until: "{{ eval == 'yes'}}"