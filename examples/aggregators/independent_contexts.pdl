# text:
# - defs:
#     doc1:
#       aggregator: messages
#   text:
#   - read: ${ file1 }
#     role: document
#   - Write a summary of the three main points of the document.
#   - model: ollama_chat/granite3.2:2b
#   contribute: [ doc1 ]
# - defs:
#     doc2:
#       aggregator: messages
#   text:
#   - read: ${ file2 }
#     role: document
#   - Write a summary of the three main points of the document.
#   - model: ollama_chat/granite3.2:2b
#   contribute: [ doc2 ]
# - What are the contradictions between the documents?
# - model: ollama_chat/granite3.2:2b
#   contexts:
#   - independent:
#     - ${ doc1 }
#     - ${ doc2 }
#   - ${ pdl_context }


defs:
  documents:
    for:
      file: ${ files }
    repeat:
      aggregator: messages
    join:
      as: array
text:
- for:
    file: ${ files }
    doc: ${ documents }
  repeat:
    text:
    - read: ${ file }
      role: document
    - Write a summary of the three main points of the document.
    - model: ollama_chat/granite3.2:2b
    contribute: [ doc ]
- What are the contradictions between the documents?
- model: ollama_chat/granite3.2:2b
  contexts:
  - independent: ${ documents }
  - ${ pdl_context }
