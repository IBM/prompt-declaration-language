{
    "description": "Arithmetic Expressions",
    "prompts": [
        "Q: ",
        {
            "var": "QUESTION",
            "lookup": {
                "model": "ibm/granite-20b-code-instruct-v1",
                "parameters": {
                    "decoding_method": "greedy",
                    "distribution_batch_size": 1,
                    "max_length": 2048
                },
                "input": {
                    "context": true,
                    "spec": "GraniteQuestionSpec"
                }
            }
        },
        "\n",
        "A: Let's think step by step.\n",
        {
            "prompts": [
                {
                    "var": "REASON_OR_CALC",
                    "lookup": {
                        "model": "ibm/granite-20b-code-instruct-v1",
                        "parameters": {
                            "decoding_method": "greedy",
                            "distribution_batch_size": 1,
                            "max_length": 2048
                        },
                        "input": "context"
                    }
                },
                {
                    "prompts": [
                        {
                            "var": "EXPR",
                            "lookup": {
                                "model": "ibm/granite-20b-code-instruct-v1",
                                "parameters": {
                                    "decoding_method": "greedy",
                                    "distribution_batch_size": 1,
                                    "max_length": 2048
                                },
                                "input": "context"
                            }
                        },
                        {
                            "var": "RESULT",
                            "lookup": {
                                "lan": "python",
                                "code": [
                                    "calculator.run(EXPR)"
                                ]
                            }
                        },
                        " >>\n"
                    ],
                    "condition": "REASON_OR_CALC.endswith('<<')"
                }
            ],
            "repeat": "*"
        },
        "So the answer is $RESULT"
    ]
}