description: Code explanation example
prompts:
- filename: examples/code/data.json
  json_content: true
  def: CODE
  show_result: False
- filename: examples/code/ground_truth.txt
  def: TRUTH
  show_result: False
- "\n"
- get: CODE.source_code
- "\n"
- model: ibm/granite-20b-code-instruct-v1
  parameters:
    decoding_method: greedy
    max_new_tokens: 1024
  input:
    prompts:
    - |
      Here is some info about the location of the function in the repo.
      repo: 
    - get: CODE.repo_info.repo
    - "\npath: "
    - get: CODE.repo_info.path
    - "\nFunction_name: "
    - get: CODE.repo_info.function_name
    - "\n\n\n"
    - "Explain the following code:\n"
    - "```\n"
    - get: CODE.source_code
    - "```\n"
  def: EXPLANATION
- "\n\n\nEVALUATION:"
- "\nThe similarity (Levenshtein) between this answer and the ground truth is: "
- def: EVAL
  lan: python
  code:
  - |
    import textdistance
    expl = """
  - get: EXPLANATION
  - |
    """
    truth = """
  - get: TRUTH
  - |
    """
    result = textdistance.levenshtein.normalized_similarity(expl, truth)

