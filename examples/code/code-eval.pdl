description: Code explanation example
document:
- read: examples/code/data.json
  parser: json
  def: CODE
  show_result: False
- "\n{{ CODE.source_code }}\n"
- model: ibm/granite-20b-code-instruct
  platform: bam
  def: EXPLANATION
  input:
    document:
    - |
      Here is some info about the location of the function in the repo.
      repo: 
      {{ CODE.repo_info.repo }}
      path: {{ CODE.repo_info.path }}
      Function_name: {{ CODE.repo_info.function_name }}


      Explain the following code:
      ```
      {{ CODE.source_code }}```
- read: examples/code/ground_truth.txt
  def: TRUTH
  show_result: False
- |


  EVALUATION:
  The similarity (Levenshtein) between this answer and the ground truth is:
- def: EVAL
  lan: python
  code:
  - |
    import textdistance
    expl = """
    {{ EXPLANATION }}
    """
    truth = """
    {{ TRUTH }}
    """
    result = textdistance.levenshtein.normalized_similarity(expl, truth)