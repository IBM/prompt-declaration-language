description: tool use
defs:
  search:
    description: Wikipedia search
    function:
      topic:
        type: string
        description: Topic to search
    return:
      lang: python
      code: |
        import warnings, wikipedia
        warnings.simplefilter("ignore")
        try:
          result = wikipedia.summary("${ topic }")
        except wikipedia.WikipediaException as e:
          result = str(e)
  tools:
    array:
      - ${ search.signature }
text:
- "What is the circumference of planet Earth?\n"
- model: ollama_chat/granite4:micro
  parameters:
    tools: ${ tools }
  modelResponse: actions
  contribute: []
- defs:
    action: ${ stdlib.get_tool_calls(actions)[0] }
    func_name: ${ action.function.name }
    func_args:
      data: ${ action.function.arguments }
      parser: json
  if: ${ func_name == "search" }
  then: ${ search(func_args["topic"]) }
