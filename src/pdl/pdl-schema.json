{
  "$defs": {
    "AggregatorBlock": {
      "additionalProperties": false,
      "description": "Create a new aggregator that can be use in the `contribute` field.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "aggregator",
          "default": "aggregator",
          "title": "Kind",
          "type": "string"
        },
        "aggregator": {
          "anyOf": [
            {
              "const": "context",
              "type": "string"
            },
            {
              "$ref": "#/$defs/FileAggregatorConfig"
            }
          ],
          "title": "Aggregator"
        }
      },
      "required": [
        "aggregator"
      ],
      "title": "AggregatorBlock",
      "type": "object"
    },
    "AnyPattern": {
      "additionalProperties": false,
      "description": "Match any value.",
      "properties": {
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "any": {
          "const": null,
          "title": "Any",
          "type": "null"
        }
      },
      "required": [
        "any"
      ],
      "title": "AnyPattern",
      "type": "object"
    },
    "ArgsBlock": {
      "additionalProperties": false,
      "description": "Execute a command line, which will spawn a subprocess with the given argument vector. Note: if you need a shell script execution, you must wrap your command line in /bin/sh or some shell of your choosing.\n\nExample:\n```PDL\nargs:\n- /bin/sh\n- \"-c\"\n- \"if [[ $x = 1 ]]; then echo y; else echo n; fi\"\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "code",
          "default": "code",
          "title": "Kind",
          "type": "string"
        },
        "lang": {
          "const": "command",
          "default": "command",
          "title": "Lang",
          "type": "string"
        },
        "args": {
          "description": "The argument vector to spawn.\n    ",
          "items": {
            "$ref": "#/$defs/ExpressionStr"
          },
          "title": "Args",
          "type": "array"
        }
      },
      "required": [
        "args"
      ],
      "title": "ArgsBlock",
      "type": "object"
    },
    "ArrayBlock": {
      "additionalProperties": false,
      "description": "Return the array of values computed by each block of the list of blocks.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "array",
          "default": "array",
          "title": "Kind",
          "type": "string"
        },
        "array": {
          "description": "Elements of the array.",
          "items": {
            "$ref": "#/$defs/BlockType"
          },
          "title": "Array",
          "type": "array"
        }
      },
      "required": [
        "array"
      ],
      "title": "ArrayBlock",
      "type": "object"
    },
    "ArrayPattern": {
      "additionalProperties": false,
      "description": "Match an array.",
      "properties": {
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "array": {
          "items": {
            "$ref": "#/$defs/PatternType"
          },
          "title": "Array",
          "type": "array"
        }
      },
      "required": [
        "array"
      ],
      "title": "ArrayPattern",
      "type": "object"
    },
    "BlockType": {
      "anyOf": [
        {
          "$ref": "#/$defs/ExpressionBlock"
        },
        {
          "$ref": "#/$defs/FunctionBlock"
        },
        {
          "$ref": "#/$defs/CallBlock"
        },
        {
          "$ref": "#/$defs/LitellmModelBlock"
        },
        {
          "$ref": "#/$defs/GraniteioModelBlock"
        },
        {
          "$ref": "#/$defs/CodeBlock"
        },
        {
          "$ref": "#/$defs/ArgsBlock"
        },
        {
          "$ref": "#/$defs/GetBlock"
        },
        {
          "$ref": "#/$defs/DataBlock"
        },
        {
          "$ref": "#/$defs/IfBlock"
        },
        {
          "$ref": "#/$defs/MatchBlock"
        },
        {
          "$ref": "#/$defs/RepeatBlock"
        },
        {
          "$ref": "#/$defs/MapBlock"
        },
        {
          "$ref": "#/$defs/TextBlock"
        },
        {
          "$ref": "#/$defs/LastOfBlock"
        },
        {
          "$ref": "#/$defs/ArrayBlock"
        },
        {
          "$ref": "#/$defs/ObjectBlock"
        },
        {
          "$ref": "#/$defs/MessageBlock"
        },
        {
          "$ref": "#/$defs/ReadBlock"
        },
        {
          "$ref": "#/$defs/IncludeBlock"
        },
        {
          "$ref": "#/$defs/ImportBlock"
        },
        {
          "$ref": "#/$defs/AggregatorBlock"
        },
        {
          "$ref": "#/$defs/ErrorBlock"
        },
        {
          "$ref": "#/$defs/EmptyBlock"
        }
      ]
    },
    "CallBlock": {
      "additionalProperties": false,
      "description": "Calling a function.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "call",
          "default": "call",
          "title": "Kind",
          "type": "string"
        },
        "call": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "$ref": "#/$defs/FunctionBlock"
            },
            {
              "type": "string"
            }
          ],
          "description": "Function to call.\n    ",
          "title": "Call"
        },
        "args": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "default": {},
          "description": "Arguments of the function with their values.\n    ",
          "title": "Args"
        },
        "pdl__trace": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null
        }
      },
      "required": [
        "call"
      ],
      "title": "CallBlock",
      "type": "object"
    },
    "CodeBlock": {
      "additionalProperties": false,
      "description": "Execute a piece of code.\n\nExample:\n```PDL\nlang: python\ncode: |\n    import random\n    # (In PDL, set `result` to the output you wish for your code block.)\n    result = random.randint(1, 20)\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "code",
          "default": "code",
          "title": "Kind",
          "type": "string"
        },
        "lang": {
          "description": "Programming language of the code.\n    ",
          "enum": [
            "python",
            "command",
            "jinja",
            "pdl",
            "ipython"
          ],
          "title": "Lang",
          "type": "string"
        },
        "code": {
          "$ref": "#/$defs/BlockType",
          "description": "Code to execute.\n    "
        }
      },
      "required": [
        "lang",
        "code"
      ],
      "title": "CodeBlock",
      "type": "object"
    },
    "ContributeElement": {
      "anyOf": [
        {
          "$ref": "#/$defs/ContributeTarget"
        },
        {
          "type": "string"
        },
        {
          "additionalProperties": {
            "$ref": "#/$defs/ContributeValue"
          },
          "type": "object"
        }
      ]
    },
    "ContributeTarget": {
      "description": "Values allowed in the `contribute` field.",
      "enum": [
        "result",
        "context",
        "stdout",
        "stderr"
      ],
      "title": "ContributeTarget",
      "type": "string"
    },
    "ContributeValue": {
      "additionalProperties": false,
      "description": "Contribution of a specific value instead of the default one.",
      "properties": {
        "value": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "title": "Value"
        }
      },
      "required": [
        "value"
      ],
      "title": "ContributeValue",
      "type": "object"
    },
    "DataBlock": {
      "additionalProperties": false,
      "description": "Arbitrary value, equivalent to JSON.\n\nExample. As part of a `defs` section, set `numbers` to the list `[1, 2, 3, 4]`:\n```PDL\ndefs:\n  numbers:\n    data: [1, 2, 3, 4]\n```\n\nExample.  Evaluate `${ TEST.answer }` in\n[Jinja](https://jinja.palletsprojects.com/en/stable/), passing\nthe result to a regex parser with capture groups.  Set\n`EXTRACTED_GROUND_TRUTH` to an object with attribute `answer`,\na string, containing the value of the capture group.\n```PDL\n- data: ${ TEST.answer }\n  parser:\n    regex: \"(.|\\n)*#### (?P<answer>([0-9])*)\\n*\"\n    spec:\n      answer: string\n  def: EXTRACTED_GROUND_TRUTH\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "data",
          "default": "data",
          "title": "Kind",
          "type": "string"
        },
        "data": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "description": "Value defined.",
          "title": "Data"
        },
        "raw": {
          "default": false,
          "description": "Do not evaluate expressions inside strings.",
          "title": "Raw",
          "type": "boolean"
        }
      },
      "required": [
        "data"
      ],
      "title": "DataBlock",
      "type": "object"
    },
    "EmptyBlock": {
      "additionalProperties": false,
      "description": "Block without an action. It can contain definitions.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "empty",
          "default": "empty",
          "title": "Kind",
          "type": "string"
        }
      },
      "title": "EmptyBlock",
      "type": "object"
    },
    "EnumPdlType": {
      "additionalProperties": true,
      "description": "Json Schema with an `enum` field.",
      "properties": {
        "enum": {
          "items": {},
          "title": "Enum",
          "type": "array"
        }
      },
      "required": [
        "enum"
      ],
      "title": "EnumPdlType",
      "type": "object"
    },
    "ErrorBlock": {
      "additionalProperties": false,
      "description": "Block representing an error generated at runtime.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "error",
          "default": "error",
          "title": "Kind",
          "type": "string"
        },
        "msg": {
          "description": "Error message.\n    ",
          "title": "Msg",
          "type": "string"
        },
        "program": {
          "$ref": "#/$defs/BlockType",
          "description": "Block that raised the error.\n    "
        }
      },
      "required": [
        "msg",
        "program"
      ],
      "title": "ErrorBlock",
      "type": "object"
    },
    "ExpectationType": {
      "additionalProperties": false,
      "description": "Single expectation definition.",
      "properties": {
        "expect": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "title": "Expect"
        },
        "feedback": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "$ref": "#/$defs/FunctionBlock"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Feedback"
        }
      },
      "required": [
        "expect"
      ],
      "title": "ExpectationType",
      "type": "object"
    },
    "ExpectationsType": {
      "items": {
        "$ref": "#/$defs/ExpectationType"
      },
      "type": "array"
    },
    "ExpressionBlock": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "integer"
        },
        {
          "type": "number"
        },
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    },
    "ExpressionBool": {
      "anyOf": [
        {
          "$ref": "#/$defs/LocalizedExpression_TypeVar_"
        },
        {
          "type": "boolean"
        },
        {
          "type": "string"
        }
      ]
    },
    "ExpressionInt": {
      "anyOf": [
        {
          "$ref": "#/$defs/LocalizedExpression_TypeVar_"
        },
        {
          "type": "integer"
        },
        {
          "type": "string"
        }
      ]
    },
    "ExpressionStr": {
      "anyOf": [
        {
          "$ref": "#/$defs/LocalizedExpression_TypeVar_"
        },
        {
          "type": "string"
        }
      ]
    },
    "FileAggregatorConfig": {
      "additionalProperties": false,
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Documentation associated to the aggregator config.\n    ",
          "title": "Description"
        },
        "file": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Name of the file to which contribute.",
          "title": "File"
        },
        "mode": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            }
          ],
          "default": "w",
          "description": "File opening mode.",
          "title": "Mode"
        },
        "encoding": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": "utf-8",
          "description": "File encoding.",
          "title": "Encoding"
        },
        "prefix": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            }
          ],
          "default": "",
          "description": "Prefix to the contributed value.",
          "title": "Prefix"
        },
        "suffix": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            }
          ],
          "default": "\n",
          "description": "Suffix to the contributed value.",
          "title": "Suffix"
        },
        "flush": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ],
          "default": false,
          "description": "Whether to forcibly flush the stream.",
          "title": "Flush"
        }
      },
      "required": [
        "file"
      ],
      "title": "FileAggregatorConfig",
      "type": "object"
    },
    "FunctionBlock": {
      "additionalProperties": false,
      "description": "Function declaration.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "function",
          "default": "function",
          "title": "Kind",
          "type": "string"
        },
        "function": {
          "anyOf": [
            {
              "additionalProperties": {
                "$ref": "#/$defs/PdlTypeType"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "description": "Functions parameters with their types.\n    ",
          "title": "Function"
        },
        "return": {
          "$ref": "#/$defs/BlockType",
          "description": "Body of the function.\n    "
        },
        "signature": {
          "anyOf": [
            {
              "contentMediaType": "application/json",
              "contentSchema": {},
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Function signature computed from the function definition.\n    ",
          "title": "Signature"
        }
      },
      "required": [
        "function",
        "return"
      ],
      "title": "FunctionBlock",
      "type": "object"
    },
    "GetBlock": {
      "additionalProperties": false,
      "description": "Get the value of a variable.\n\nThe GetBlock is deprecated.  Use DataBlock instead.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "get",
          "default": "get",
          "title": "Kind",
          "type": "string"
        },
        "get": {
          "description": "Name of the variable to access.",
          "title": "Get",
          "type": "string"
        }
      },
      "required": [
        "get"
      ],
      "title": "GetBlock",
      "type": "object"
    },
    "GraniteioModelBlock": {
      "additionalProperties": false,
      "description": "Call an LLM through the granite-io API.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "model",
          "default": "model",
          "title": "Kind",
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/BlockType",
          "default": "${ pdl_context }",
          "description": "Messages to send to the model.\n    "
        },
        "modelResponse": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Variable where to store the raw response of the model.\n    "
        },
        "pdl__usage": {
          "$ref": "#/$defs/OptionalPdlUsage",
          "default": null,
          "description": "Tokens consumed during model call\n    "
        },
        "pdl__model_input": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": null
        },
        "platform": {
          "const": "granite-io",
          "default": "granite-io",
          "description": "Optional field to ensure that the block is using granite-io.\n    ",
          "title": "Platform",
          "type": "string"
        },
        "processor": {
          "anyOf": [
            {
              "$ref": "#/$defs/GraniteioProcessor"
            },
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "description": "IO Processor configuration or object.\n    ",
          "title": "Processor"
        },
        "parameters": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Parameters sent to the model.\n    ",
          "title": "Parameters"
        }
      },
      "required": [
        "processor"
      ],
      "title": "GraniteioModelBlock",
      "type": "object"
    },
    "GraniteioProcessor": {
      "properties": {
        "type": {
          "$ref": "#/$defs/OptionalExpressionStr",
          "default": null
        },
        "model": {
          "$ref": "#/$defs/OptionalExpressionStr",
          "default": null
        },
        "backend": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            },
            {
              "additionalProperties": true,
              "type": "object"
            },
            {}
          ],
          "title": "Backend"
        }
      },
      "required": [
        "backend"
      ],
      "title": "GraniteioProcessor",
      "type": "object"
    },
    "IfBlock": {
      "additionalProperties": false,
      "description": "Conditional control structure.\n\nExample:\n```PDL\ndefs:\n  answer:\n    read:\n    message: \"Enter a number? \"\nif: ${ (answer | int) == 42 }\nthen: You won!\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "if",
          "default": "if",
          "title": "Kind",
          "type": "string"
        },
        "if": {
          "$ref": "#/$defs/ExpressionBool",
          "description": "Condition.\n    "
        },
        "then": {
          "$ref": "#/$defs/BlockType",
          "description": "Branch to execute if the condition is true.\n    "
        },
        "else": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Branch to execute if the condition is false.\n    "
        }
      },
      "required": [
        "if",
        "then"
      ],
      "title": "IfBlock",
      "type": "object"
    },
    "ImportBlock": {
      "additionalProperties": false,
      "description": "Import a PDL file.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "import",
          "default": "import",
          "title": "Kind",
          "type": "string"
        },
        "import": {
          "description": "Name of the file to import.\n    ",
          "title": "Import",
          "type": "string"
        },
        "pdl__trace": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null
        }
      },
      "required": [
        "import"
      ],
      "title": "ImportBlock",
      "type": "object"
    },
    "IncludeBlock": {
      "additionalProperties": false,
      "description": "Include a PDL file.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "include",
          "default": "include",
          "title": "Kind",
          "type": "string"
        },
        "include": {
          "description": "Name of the file to include.\n    ",
          "title": "Include",
          "type": "string"
        },
        "pdl__trace": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null
        }
      },
      "required": [
        "include"
      ],
      "title": "IncludeBlock",
      "type": "object"
    },
    "IndependentEnum": {
      "enum": [
        "independent",
        "dependent"
      ],
      "title": "IndependentEnum",
      "type": "string"
    },
    "JoinArray": {
      "additionalProperties": false,
      "description": "Join loop iterations as an array.",
      "properties": {
        "as": {
          "const": "array",
          "description": "Return the result of each iteration as an array.\n    ",
          "title": "As",
          "type": "string"
        }
      },
      "required": [
        "as"
      ],
      "title": "JoinArray",
      "type": "object"
    },
    "JoinLastOf": {
      "additionalProperties": false,
      "description": "Join loop iterations as the value of the last iteration.",
      "properties": {
        "as": {
          "const": "lastOf",
          "description": "Return the result of the last iteration.\n    ",
          "title": "As",
          "type": "string"
        }
      },
      "required": [
        "as"
      ],
      "title": "JoinLastOf",
      "type": "object"
    },
    "JoinObject": {
      "additionalProperties": false,
      "description": "Join loop iterations as an object.",
      "properties": {
        "as": {
          "const": "object",
          "description": "Return the union of the objects created at each iteration.\n    ",
          "title": "As",
          "type": "string"
        }
      },
      "required": [
        "as"
      ],
      "title": "JoinObject",
      "type": "object"
    },
    "JoinReduce": {
      "additionalProperties": false,
      "description": "Join loop iterations as the value of the last iteration.",
      "properties": {
        "as": {
          "const": "reduce",
          "default": "reduce",
          "title": "As",
          "type": "string"
        },
        "reduce": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Function used to combine the results.",
          "title": "Reduce"
        }
      },
      "required": [
        "reduce"
      ],
      "title": "JoinReduce",
      "type": "object"
    },
    "JoinText": {
      "additionalProperties": false,
      "description": "Join loop iterations as a string.",
      "properties": {
        "as": {
          "const": "text",
          "default": "text",
          "description": "String concatenation of the result of each iteration.\n    ",
          "title": "As",
          "type": "string"
        },
        "with": {
          "default": "",
          "description": "String used to concatenate each iteration of the loop.\n    ",
          "title": "With",
          "type": "string"
        }
      },
      "title": "JoinText",
      "type": "object"
    },
    "JoinType": {
      "anyOf": [
        {
          "$ref": "#/$defs/JoinText"
        },
        {
          "$ref": "#/$defs/JoinArray"
        },
        {
          "$ref": "#/$defs/JoinObject"
        },
        {
          "$ref": "#/$defs/JoinLastOf"
        },
        {
          "$ref": "#/$defs/JoinReduce"
        }
      ]
    },
    "JsonSchemaTypePdlType": {
      "additionalProperties": true,
      "description": "Json Schema with a type field.",
      "properties": {
        "type": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "Type"
        }
      },
      "required": [
        "type"
      ],
      "title": "JsonSchemaTypePdlType",
      "type": "object"
    },
    "LastOfBlock": {
      "additionalProperties": false,
      "description": "Return the value of the last block if the list of blocks.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "lastOf",
          "default": "lastOf",
          "title": "Kind",
          "type": "string"
        },
        "lastOf": {
          "description": "Sequence of blocks to execute.",
          "items": {
            "$ref": "#/$defs/BlockType"
          },
          "title": "Lastof",
          "type": "array"
        }
      },
      "required": [
        "lastOf"
      ],
      "title": "LastOfBlock",
      "type": "object"
    },
    "LitellmModelBlock": {
      "additionalProperties": false,
      "description": "Call an LLM through [the LiteLLM API](https://docs.litellm.ai/).\n\nExample:\n```PDL\nmodel: ollama/granite-code:8b\nparameters:\n  stop: ['!']\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "model",
          "default": "model",
          "title": "Kind",
          "type": "string"
        },
        "input": {
          "$ref": "#/$defs/BlockType",
          "default": "${ pdl_context }",
          "description": "Messages to send to the model.\n    "
        },
        "modelResponse": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Variable where to store the raw response of the model.\n    "
        },
        "pdl__usage": {
          "$ref": "#/$defs/OptionalPdlUsage",
          "default": null,
          "description": "Tokens consumed during model call\n    "
        },
        "pdl__model_input": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": null
        },
        "platform": {
          "const": "litellm",
          "default": "litellm",
          "description": "Optional field to ensure that the block is using LiteLLM.\n    ",
          "title": "Platform",
          "type": "string"
        },
        "model": {
          "$ref": "#/$defs/ExpressionStr",
          "description": "Name of the model following the LiteLLM convention.\n    "
        },
        "parameters": {
          "anyOf": [
            {
              "$ref": "#/$defs/LitellmParameters"
            },
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Parameters to send to the model.\n    ",
          "title": "Parameters"
        },
        "structuredDecoding": {
          "$ref": "#/$defs/OptionalBool",
          "default": true,
          "description": "Perform structured decoding if possible (i.e., `parser` and `spec` are provided and the inference platform supports it)."
        }
      },
      "required": [
        "model"
      ],
      "title": "LitellmModelBlock",
      "type": "object"
    },
    "LitellmParameters": {
      "additionalProperties": true,
      "description": "Parameters passed to LiteLLM. More details at [https://docs.litellm.ai/docs/completion/input](https://docs.litellm.ai/docs/completion/input).\n\nNote that not all models and platforms accept all parameters.",
      "properties": {
        "timeout": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Timeout"
        },
        "temperature": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Temperature"
        },
        "top_p": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Top P"
        },
        "n": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "N"
        },
        "stop": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Stop"
        },
        "max_tokens": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Max Tokens"
        },
        "presence_penalty": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Presence Penalty"
        },
        "frequency_penalty": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Frequency Penalty"
        },
        "logit_bias": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Logit Bias"
        },
        "user": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "User"
        },
        "response_format": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Response Format"
        },
        "seed": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Seed"
        },
        "tools": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Tools"
        },
        "tool_choice": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Tool Choice"
        },
        "logprobs": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Logprobs"
        },
        "top_logprobs": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Top Logprobs"
        },
        "parallel_tool_calls": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Parallel Tool Calls"
        },
        "extra_headers": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Extra Headers"
        },
        "functions": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Functions"
        },
        "function_call": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Function Call"
        },
        "base_url": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Base Url"
        },
        "api_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Api Version"
        },
        "api_key": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Api Key"
        },
        "model_list": {
          "anyOf": [
            {
              "items": {},
              "type": "array"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Model List"
        },
        "mock_response": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Mock Response"
        },
        "custom_llm_provider": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Custom Llm Provider"
        },
        "max_retries": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Max Retries"
        }
      },
      "title": "LitellmParameters",
      "type": "object"
    },
    "LocalizedExpression_TypeVar_": {
      "additionalProperties": false,
      "properties": {
        "pdl__expr": {
          "title": "Pdl  Expr"
        },
        "pdl__result": {
          "anyOf": [
            {},
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Pdl  Result"
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        }
      },
      "required": [
        "pdl__expr"
      ],
      "title": "LocalizedExpression",
      "type": "object"
    },
    "MapBlock": {
      "additionalProperties": false,
      "description": "Independent executions of  a block.\nRepeat the execution of a block starting from the initial scope\nand `pdl_context`.\n\nFor loop example:\n```PDL\nfor:\n    number: [1, 2, 3, 4]\n    name: [\"Bob\", \"Carol\", \"David\", \"Ernest\"]\nmap:\n    \"${ name }'s number is ${ number }\\n\"\n```\n\nBounded loop:\n```PDL\nindex: i\nmaxIterations: 5\nmap:\n    ${ i }\njoin:\n  as: array\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "map",
          "default": "map",
          "title": "Kind",
          "type": "string"
        },
        "for": {
          "anyOf": [
            {
              "additionalProperties": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/LocalizedExpression_TypeVar_"
                  },
                  {
                    "items": {},
                    "type": "array"
                  },
                  {
                    "type": "string"
                  }
                ]
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arrays to iterate over.\n    ",
          "title": "For"
        },
        "index": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable containing the loop iteration.\n    "
        },
        "map": {
          "$ref": "#/$defs/BlockType",
          "description": "Body of the iterator.\n    "
        },
        "maxIterations": {
          "$ref": "#/$defs/OptionalExpressionInt",
          "default": null,
          "description": "Maximal number of iterations to perform.\n    "
        },
        "join": {
          "$ref": "#/$defs/JoinType",
          "default": {
            "as": "text",
            "with": ""
          },
          "description": "Define how to combine the result of each iteration.\n    "
        },
        "maxWorkers": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "Maximal number of workers to execute the map in parallel. Is it is set to `0`, the execution is sequential otherwise it is given as argument to the `ThreadPoolExecutor`.\n    "
        },
        "pdl__trace": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/BlockType"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Pdl  Trace"
        }
      },
      "required": [
        "map"
      ],
      "title": "MapBlock",
      "type": "object"
    },
    "MatchBlock": {
      "additionalProperties": false,
      "description": "Match control structure.\n\nExample:\n```PDL\ndefs:\n  answer:\n    read:\n    message: \"Enter a number? \"\nmatch: ${ (answer | int) }\nwith:\n- case: 42\n  then: You won!\n- case:\n    any:\n    def: x\n  if: ${ x > 42 }\n  then: Too high\n- then: Too low",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "match",
          "default": "match",
          "title": "Kind",
          "type": "string"
        },
        "match": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalizedExpression_TypeVar_"
            },
            {},
            {
              "type": "string"
            }
          ],
          "description": "Matched expression.\n    ",
          "title": "Match"
        },
        "with": {
          "description": "List of cases to match.\n    ",
          "items": {
            "$ref": "#/$defs/MatchCase"
          },
          "title": "With",
          "type": "array"
        }
      },
      "required": [
        "match",
        "with"
      ],
      "title": "MatchBlock",
      "type": "object"
    },
    "MatchCase": {
      "additionalProperties": false,
      "description": "Case of a match.",
      "properties": {
        "case": {
          "anyOf": [
            {
              "$ref": "#/$defs/PatternType"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "if": {
          "$ref": "#/$defs/OptionalExpressionBool",
          "default": null
        },
        "then": {
          "$ref": "#/$defs/BlockType"
        },
        "pdl__case_result": {
          "$ref": "#/$defs/OptionalBool",
          "default": null
        },
        "pdl__if_result": {
          "$ref": "#/$defs/OptionalBool",
          "default": null
        },
        "pdl__matched": {
          "$ref": "#/$defs/OptionalBool",
          "default": null
        }
      },
      "required": [
        "then"
      ],
      "title": "MatchCase",
      "type": "object"
    },
    "MessageBlock": {
      "additionalProperties": false,
      "description": "Create a message.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "message",
          "default": "message",
          "title": "Kind",
          "type": "string"
        },
        "content": {
          "$ref": "#/$defs/BlockType",
          "description": "Content of the message."
        },
        "name": {
          "$ref": "#/$defs/OptionalExpressionStr",
          "default": null,
          "description": "For example, the name of the tool that was invoked, for which this message is the tool response."
        },
        "tool_call_id": {
          "$ref": "#/$defs/OptionalExpressionStr",
          "default": null,
          "description": "The id of the tool invocation for which this message is the tool response."
        }
      },
      "required": [
        "content"
      ],
      "title": "MessageBlock",
      "type": "object"
    },
    "ModelInput": {
      "items": {
        "additionalProperties": true,
        "type": "object"
      },
      "type": "array"
    },
    "ObjectBlock": {
      "additionalProperties": false,
      "description": "Return the object where the value of each field is defined by a block. If the body of the object is an array, the resulting object is the union of the objects computed by each element of the array.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "object",
          "default": "object",
          "title": "Kind",
          "type": "string"
        },
        "object": {
          "anyOf": [
            {
              "additionalProperties": {
                "$ref": "#/$defs/BlockType"
              },
              "type": "object"
            },
            {
              "items": {
                "$ref": "#/$defs/BlockType"
              },
              "type": "array"
            }
          ],
          "title": "Object"
        }
      },
      "required": [
        "object"
      ],
      "title": "ObjectBlock",
      "type": "object"
    },
    "ObjectPattern": {
      "additionalProperties": false,
      "description": "Match an object.",
      "properties": {
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "object": {
          "additionalProperties": {
            "$ref": "#/$defs/PatternType"
          },
          "title": "Object",
          "type": "object"
        }
      },
      "required": [
        "object"
      ],
      "title": "ObjectPattern",
      "type": "object"
    },
    "ObjectPdlType": {
      "additionalProperties": false,
      "description": "Object type.",
      "properties": {
        "object": {
          "additionalProperties": {
            "$ref": "#/$defs/PdlTypeType"
          },
          "title": "Object",
          "type": "object"
        }
      },
      "required": [
        "object"
      ],
      "title": "ObjectPdlType",
      "type": "object"
    },
    "OptionalAny": {
      "anyOf": [
        {},
        {
          "type": "null"
        }
      ]
    },
    "OptionalBlockType": {
      "anyOf": [
        {
          "$ref": "#/$defs/BlockType"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalBool": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalBoolOrStr": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalExpressionBool": {
      "anyOf": [
        {
          "$ref": "#/$defs/ExpressionBool"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalExpressionInt": {
      "anyOf": [
        {
          "$ref": "#/$defs/ExpressionInt"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalExpressionStr": {
      "anyOf": [
        {
          "$ref": "#/$defs/ExpressionStr"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalInt": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalModelInput": {
      "anyOf": [
        {
          "$ref": "#/$defs/ModelInput"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalParserType": {
      "anyOf": [
        {
          "$ref": "#/$defs/ParserType"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalPdlLocationType": {
      "anyOf": [
        {
          "$ref": "#/$defs/PdlLocationType"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalPdlTiming": {
      "anyOf": [
        {
          "$ref": "#/$defs/PdlTiming"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalPdlType": {
      "additionalProperties": false,
      "description": "Optional type.",
      "properties": {
        "optional": {
          "$ref": "#/$defs/PdlTypeType"
        }
      },
      "required": [
        "optional"
      ],
      "title": "OptionalPdlType",
      "type": "object"
    },
    "OptionalPdlUsage": {
      "anyOf": [
        {
          "$ref": "#/$defs/PdlUsage"
        },
        {
          "type": "null"
        }
      ]
    },
    "OptionalStr": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    },
    "OrPattern": {
      "additionalProperties": false,
      "description": "Match any of the patterns.",
      "properties": {
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "anyOf": {
          "items": {
            "$ref": "#/$defs/PatternType"
          },
          "title": "Anyof",
          "type": "array"
        }
      },
      "required": [
        "anyOf"
      ],
      "title": "OrPattern",
      "type": "object"
    },
    "ParserType": {
      "anyOf": [
        {
          "enum": [
            "json",
            "jsonl",
            "yaml"
          ],
          "type": "string"
        },
        {
          "$ref": "#/$defs/PdlParser"
        },
        {
          "$ref": "#/$defs/RegexParser"
        }
      ]
    },
    "PatternType": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "integer"
        },
        {
          "type": "number"
        },
        {
          "type": "string"
        },
        {
          "$ref": "#/$defs/OrPattern"
        },
        {
          "$ref": "#/$defs/ArrayPattern"
        },
        {
          "$ref": "#/$defs/ObjectPattern"
        },
        {
          "$ref": "#/$defs/AnyPattern"
        },
        {
          "type": "null"
        }
      ]
    },
    "PdlBlock": {
      "$ref": "#/$defs/BlockType",
      "title": "PdlBlock"
    },
    "PdlLocationType": {
      "additionalProperties": false,
      "description": "Internal data structure to keep track of the source location information.",
      "properties": {
        "path": {
          "items": {
            "type": "string"
          },
          "title": "Path",
          "type": "array"
        },
        "file": {
          "title": "File",
          "type": "string"
        },
        "table": {
          "additionalProperties": {
            "type": "integer"
          },
          "title": "Table",
          "type": "object"
        }
      },
      "required": [
        "path",
        "file",
        "table"
      ],
      "title": "PdlLocationType",
      "type": "object"
    },
    "PdlParser": {
      "additionalProperties": false,
      "description": "Use a PDL program as a parser specification (experimental).",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null
        },
        "pdl": {
          "$ref": "#/$defs/BlockType"
        }
      },
      "required": [
        "pdl"
      ],
      "title": "PdlParser",
      "type": "object"
    },
    "PdlTiming": {
      "additionalProperties": false,
      "description": "Internal data structure to record timing information in the trace.",
      "properties": {
        "start_nanos": {
          "$ref": "#/$defs/OptionalInt",
          "default": 0
        },
        "end_nanos": {
          "$ref": "#/$defs/OptionalInt",
          "default": 0
        },
        "first_use_nanos": {
          "$ref": "#/$defs/OptionalInt",
          "default": 0
        },
        "timezone": {
          "$ref": "#/$defs/OptionalStr",
          "default": ""
        }
      },
      "title": "PdlTiming",
      "type": "object"
    },
    "PdlTypeType": {
      "anyOf": [
        {
          "enum": [
            "null",
            "boolean",
            "string",
            "number",
            "integer",
            "array",
            "object",
            "bool",
            "str",
            "float",
            "int",
            "list",
            "obj"
          ],
          "type": "string"
        },
        {
          "$ref": "#/$defs/EnumPdlType"
        },
        {
          "items": {
            "$ref": "#/$defs/PdlTypeType"
          },
          "type": "array"
        },
        {
          "$ref": "#/$defs/OptionalPdlType"
        },
        {
          "$ref": "#/$defs/JsonSchemaTypePdlType"
        },
        {
          "$ref": "#/$defs/ObjectPdlType"
        },
        {
          "additionalProperties": {
            "$ref": "#/$defs/PdlTypeType"
          },
          "type": "object"
        },
        {
          "type": "null"
        }
      ]
    },
    "PdlUsage": {
      "description": "Internal data structure to record token consumption usage information.",
      "properties": {
        "model_calls": {
          "default": 0,
          "title": "Model Calls",
          "type": "integer"
        },
        "completion_tokens": {
          "default": 0,
          "title": "Completion Tokens",
          "type": "integer"
        },
        "prompt_tokens": {
          "default": 0,
          "title": "Prompt Tokens",
          "type": "integer"
        }
      },
      "title": "PdlUsage",
      "type": "object"
    },
    "Program": {
      "$ref": "#/$defs/BlockType",
      "description": "Prompt Declaration Language program (PDL)",
      "title": "Program"
    },
    "ReadBlock": {
      "additionalProperties": false,
      "description": "Read from a file or standard input.\n\nExample. Read from the standard input with a prompt starting with `> `.\n```PDL\nread:\nmessage: \"> \"\n```\n\nExample. Read the file `./data.yaml` in the same directory of the PDL file containing the block and parse it into YAML.\n```PDL\nread: ./data.yaml\nparser: yaml\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": true,
          "default": true,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "kind": {
          "const": "read",
          "default": "read",
          "title": "Kind",
          "type": "string"
        },
        "read": {
          "$ref": "#/$defs/OptionalExpressionStr",
          "description": "Name of the file to read. If `None`, read the standard input.\n    "
        },
        "message": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Message to prompt the user to enter a value.\n    "
        },
        "multiline": {
          "default": false,
          "description": "Indicate if one or multiple lines should be read.\n    ",
          "title": "Multiline",
          "type": "boolean"
        }
      },
      "required": [
        "read"
      ],
      "title": "ReadBlock",
      "type": "object"
    },
    "RegexParser": {
      "additionalProperties": false,
      "description": "A regular expression parser.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null
        },
        "regex": {
          "title": "Regex",
          "type": "string"
        },
        "mode": {
          "default": "fullmatch",
          "enum": [
            "search",
            "match",
            "fullmatch",
            "split",
            "findall"
          ],
          "title": "Mode",
          "type": "string"
        }
      },
      "required": [
        "regex"
      ],
      "title": "RegexParser",
      "type": "object"
    },
    "RepeatBlock": {
      "additionalProperties": false,
      "description": "Repeat the execution of a block sequentially.\nThe scope and `pdl_context` are accumulated in between iterations.\n\nFor loop example:\n```PDL\nfor:\n    number: [1, 2, 3, 4]\n    name: [\"Bob\", \"Carol\", \"David\", \"Ernest\"]\nrepeat:\n    \"${ name }'s number is ${ number }\\n\"\n```\n\nWhile loop:\n```PDL\ndefs:\n  i: 0\nwhile: ${i < 5}\nrepeat:\n    defs:\n      i: ${ i + 1}\n    data: ${ i }\njoin:\n  as: array\n```",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "repeat",
          "default": "repeat",
          "title": "Kind",
          "type": "string"
        },
        "for": {
          "anyOf": [
            {
              "additionalProperties": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/LocalizedExpression_TypeVar_"
                  },
                  {
                    "items": {},
                    "type": "array"
                  },
                  {
                    "type": "string"
                  }
                ]
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arrays to iterate over.\n    ",
          "title": "For"
        },
        "index": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable containing the loop iteration.\n    "
        },
        "while": {
          "$ref": "#/$defs/ExpressionBool",
          "default": true,
          "description": "Condition to stay at the beginning of the loop.\n    "
        },
        "repeat": {
          "$ref": "#/$defs/BlockType",
          "description": "Body of the loop.\n    "
        },
        "until": {
          "$ref": "#/$defs/ExpressionBool",
          "default": false,
          "description": "Condition to exit at the end of the loop.\n    "
        },
        "maxIterations": {
          "$ref": "#/$defs/OptionalExpressionInt",
          "default": null,
          "description": "Maximal number of iterations to perform.\n    "
        },
        "join": {
          "$ref": "#/$defs/JoinType",
          "default": {
            "as": "text",
            "with": ""
          },
          "description": "Define how to combine the result of each iteration.\n    "
        },
        "pdl__trace": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/BlockType"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Pdl  Trace"
        }
      },
      "required": [
        "repeat"
      ],
      "title": "RepeatBlock",
      "type": "object"
    },
    "TextBlock": {
      "additionalProperties": false,
      "description": "Create the concatenation of the stringify version of the result of each block of the list of blocks.",
      "properties": {
        "description": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Documentation associated to the block.\n    "
        },
        "spec": {
          "$ref": "#/$defs/PdlTypeType",
          "default": null,
          "description": "Type specification of the result of the block.\n    "
        },
        "defs": {
          "additionalProperties": {
            "$ref": "#/$defs/BlockType"
          },
          "default": {},
          "description": "Set of definitions executed before the execution of the block.\n    ",
          "title": "Defs",
          "type": "object"
        },
        "def": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Name of the variable used to store the result of the execution of the block.\n    "
        },
        "contribute": {
          "default": [
            "result",
            "context"
          ],
          "description": "Indicate if the block contributes to the result and background context.\n    ",
          "items": {
            "$ref": "#/$defs/ContributeElement"
          },
          "title": "Contribute",
          "type": "array"
        },
        "parser": {
          "$ref": "#/$defs/OptionalParserType",
          "default": null,
          "description": "Parser to use to construct a value out of a string result."
        },
        "fallback": {
          "$ref": "#/$defs/OptionalBlockType",
          "default": null,
          "description": "Block to execute in case of error.\n    "
        },
        "retry": {
          "$ref": "#/$defs/OptionalInt",
          "default": null,
          "description": "The maximum number of times to retry when an error occurs within a block.\n    "
        },
        "trace_error_on_retry": {
          "$ref": "#/$defs/OptionalBoolOrStr",
          "default": null,
          "description": "Whether to add the errors while retrying to the trace. Set this to true to use retry feature for multiple LLM trials.\n    "
        },
        "expectations": {
          "$ref": "#/$defs/ExpectationsType",
          "default": [],
          "description": "Specify any expectations that the result of the block must satisfy.\n    "
        },
        "role": {
          "$ref": "#/$defs/OptionalStr",
          "default": null,
          "description": "Role associated to the block and sub-blocks.\nTypical roles are `system`, `user`, and `assistant`,\nbut there may be other roles such as `available_tools`."
        },
        "pdl__context": {
          "$ref": "#/$defs/OptionalModelInput",
          "default": [],
          "description": "Current context."
        },
        "pdl__id": {
          "$ref": "#/$defs/OptionalStr",
          "default": "",
          "description": "Unique identifier for this block."
        },
        "pdl__result": {
          "$ref": "#/$defs/OptionalAny",
          "default": null,
          "description": "Result of the execution of the block."
        },
        "pdl__location": {
          "$ref": "#/$defs/OptionalPdlLocationType",
          "default": null
        },
        "pdl__timing": {
          "$ref": "#/$defs/OptionalPdlTiming",
          "default": null,
          "description": "Execution timing information."
        },
        "pdl__is_leaf": {
          "const": false,
          "default": false,
          "title": "Pdl  Is Leaf",
          "type": "boolean"
        },
        "context": {
          "$ref": "#/$defs/IndependentEnum",
          "default": "dependent"
        },
        "kind": {
          "const": "text",
          "default": "text",
          "title": "Kind",
          "type": "string"
        },
        "text": {
          "anyOf": [
            {
              "$ref": "#/$defs/BlockType"
            },
            {
              "items": {
                "$ref": "#/$defs/BlockType"
              },
              "type": "array"
            }
          ],
          "description": "Body of the text.\n    ",
          "title": "Text"
        }
      },
      "required": [
        "text"
      ],
      "title": "TextBlock",
      "type": "object"
    }
  },
  "title": "PDL Schemas",
  "anyOf": [
    {
      "$ref": "#/$defs/Program"
    },
    {
      "$ref": "#/$defs/PdlBlock"
    }
  ]
}
